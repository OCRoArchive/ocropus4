#!/bin/bash
library=$1
shift

python3=${python3:-python3}

help() {
cat <<EOF
Usage: $0 [COMMAND] [--help] ...

COMMAND:

EOF

grep '^[a-z_*-]*[)] *#' $0 | sed 's/[)] *[#]/ -- /'

echo
type python3
}

if test -d ./venv; then
    source ./venv/bin/activate
fi

case $library in

# data extraction

extract-seg)  # extract segmentation for deep learning
    $python3 -m ocrlib.extract_seg "$@"
    ;;
extract-lines)  # extract lines for deep learning
    $python3 -m ocrlib.extract_lines "$@"
    ;;

# inference

ocroseg)  # page segmentation
    $python3 -m ocrlib.ocroseg "$@"
    ;;
ocroline)  # line/word recognition
    $python3 -m ocrlib.ocroline "$@"
    ;;
ocrobin)   # binarization
    $python3 -m ocrlib.ocrobin "$@"
    ;;
ocrorot)   # binarization
    $python3 -m ocrlib.ocrorot "$@"
    ;;
nlbin)  # nonlinear binarization
    $python3 -m ocrlib.nlbin "$@"
    ;;
slog)  # examine logs
    $python3 -m ocrlib.slog "$@"
    ;;
pagerec)  # recognize pages
    $python3 -m ocrlib.pagerec "$@"
    ;;

# help

*)
    help
    ;;
esac
